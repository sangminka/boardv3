# Task: 게시글 등록 시 위험한 HTML 태그 저장 방지

작성일: 2026-02-06

## 배경
현재 게시글 등록/수정 시 `content`에 포함된 위험한 HTML 태그가 그대로 저장됩니다. 이로 인해 XSS 위험이 존재합니다. 저장 단계에서 입력값을 정제(sanitize)하거나, 렌더링 단계에서 일관된 필터를 적용해야 합니다.

## 목표
- 게시글 등록/수정 시 위험한 HTML 태그가 저장되지 않도록 처리
- 허용할 태그/속성 정책을 명확히 정의
- 상세/목록 렌더링 결과가 일관되도록 보장

## 범위
- 게시글 작성/수정 흐름
- `content` 저장 로직 및/또는 렌더링 로직
- 테스트 추가(가능하면)

## 작업 항목
1. **현재 처리 흐름 점검**
   - `BoardService.게시글쓰기`, `BoardService.게시글수정`에서 `content` 저장 흐름 확인
   - `BoardResponse.DetailDTO`, `IndexDTO`에서 렌더링/가공 흐름 확인

2. **정책 결정 (허용 태그/속성)**
   - 기본 정책: 텍스트 위주 + 최소 허용 태그
   - 예시 허용: `b`, `i`, `u`, `strong`, `em`, `br`, `p`, `ul`, `ol`, `li`, `a`(href)
   - 금지: `script`, `style`, `iframe`(단, YouTube 변환 기능과 충돌 여부 고려)

3. **저장 시 정제(sanitize) 적용**
   - `Jsoup.clean()`으로 저장 직전 content 정제
   - 유틸리티 클래스로 분리 (예: `HtmlSanitizer`)
   - `BoardService`에서 공통 사용

4. **렌더링 정책 통합**
   - 저장 시 정제했다면, 렌더링 시 중복 정제 최소화
   - YouTube 링크 변환(`YoutubeContentRenderer`)과 호환되도록 순서 정의
     - 예: 저장 시 기본 정제 -> 렌더링 시 YouTube 변환

5. **테스트 추가**
   - `<script>alert(1)</script>` 저장 시 제거되는지 확인
   - 허용된 태그는 유지되는지 확인
   - YouTube 링크 변환 기능 유지되는지 확인

6. **문서화**
   - 허용 태그/속성 정책을 `README.md` 또는 별도 문서에 기록

## 완료 기준
- 저장된 `content`에 위험 태그가 남지 않음
- 허용된 태그만 유지됨
- YouTube 변환 기능 정상 동작
- 최소 1개 이상의 테스트로 검증

